<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swiper nested</title>
  <style>
    body {
      margin: 0;
      background-color: #d9f81c;
      background-image:
        radial-gradient(at 47% 33%, hsl(187.59, 100%, 48%) 0, transparent 59%),
        radial-gradient(at 82% 65%, hsl(98.78, 100%, 50%) 0, transparent 55%);
    }

    .container {
      display: grid;
      grid-template-columns: minmax(calc(12ch + 4ch), 20vw) 1fr;
      grid-template-rows: 100vh;
      font-size: clamp(12px, 1.5vw, 15px);
    }

    .nav_container {
      display: grid;
      place-items: center;
      /* Glassmorphism effect */
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      backdrop-filter: blur(16px) saturate(180%);
      background-color: rgba(255, 255, 255, 0.5);
      /* Generated by https://generator.ui.glass/ */
    }

    .slide_container {
      overflow-y: hidden;
    }

    .swiper,
    .swiper.child {
      height: 100%;
    }

    .swiper.child {
      width: 100%;
      overflow-y: hidden;
    }

    .swiper-wrapper {
      height: 100%;
    }

    .swiper-slide {
      /* for sub-navigation */
      position: relative;
      display: grid;
      place-items: center;
      font-size: clamp(48px, 6.4vw, 64px);
      width: 100%;
      max-width: 100%;
      height: 100%;
      word-break: break-all;
    }

    .swiper-slide.outer:not(:has(.inner)),
    .swiper-slide.inner {
      box-sizing: border-box;
      padding-inline: 32px;
    }

    /* pagination */
    .main-navigation {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    .main-navigation .swiper-pagination-bullet {
      text-align: center;
    }

    .main-navigation .swiper-pagination-bullet-active {
      text-decoration: underline;
    }

    .sub-navigation {
      position: absolute;
      top: 50%;
      right: 8px;
      transform: translateY(-50%);
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .sub-navigation .swiper-pagination-bullet {
      width: 14px;
      aspect-ratio: 1;
      background-color: white;
      border: 1px solid black;
      border-radius: calc(infinity * 1px);
    }

    .sub-navigation .swiper-pagination-bullet-active {
      background-color: black;
    }
  </style>
  <script type="module">
    import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.mjs'

    // メインのページネーション用ラベル
    const LABEL = ['Category 1', 'Category 2', 'Category 3', 'Category 4']
    // メインのSwiper
    const swiper = new Swiper('.swiper.parent', {
      direction: 'vertical',
      mousewheel: true,
      pagination: {
        el: ".main-navigation",
        type: 'bullets',
        clickable: true,
        renderBullet: (index, className) => {
          return `<span class="${className}">${LABEL[index]}</span>`
        },
      },
    })

    // 入れ子のSwiper（セレクタで選択されたすべての要素に設定される）
    const children = new Swiper('.swiper.child', {
      direction: 'vertical',
      mousewheel: true,
      nested: true, // これがないと入れ子要素のスライドができない
      pagination: {
        el: '.sub-navigation',
        clickable: true,
      }
    })

    // メインのページネーションのbulletに追加でクリックイベントを設定
    // （入れ子スライダのあるスライドのbulletのみに限定）
    let childIndex = 0
    swiper.slides.forEach((slide, index) => {
      const hasChild = slide.querySelector('.swiper.child')
      if (hasChild) {
        // 入れ子の要素を持つスライダと同じindexのbulletを選択
        const bullet = document.querySelector(
          `.main-navigation .swiper-pagination-bullet:nth-child(${index + 1})`
        )
        const child = children[childIndex++]
        // 入れ子スライダを先頭へもどす
        bullet.addEventListener('click', () => { child.slideTo(0) })
      }
    })
  </script>
</head>

<body>
  <div class="container">
    <aside class="nav_container">
      <nav class="main-navigation"></nav>
    </aside>
    <main class="slide_container">
      <section class="swiper parent">
        <div class="swiper-wrapper">
          <div class="swiper-slide outer">
            <article class="swiper child">
              <div class="swiper-wrapper">
                <div class="swiper-slide inner">Category 1-1</div>
                <div class="swiper-slide inner">Category 1-2</div>
              </div>
              <nav class="sub-navigation"></nav>
            </article>
          </div>
          <div class="swiper-slide outer">Category 2</div>
          <div class="swiper-slide outer">
            <article class="swiper child">
              <div class="swiper-wrapper">
                <div class="swiper-slide inner">Category 3-1</div>
                <div class="swiper-slide inner">Category 3-2</div>
                <div class="swiper-slide inner">Category 3-3</div>
              </div>
              <nav class="sub-navigation"></nav>
            </article>
          </div>
          <div class="swiper-slide outer">Category 4</div>
        </div>
      </section>
    </main>
  </div>
</body>

</html>